package aspose.omr.cloud.sdk.java;

import aspose.omr.cloud.sdk.api.ApiClient;
import aspose.omr.cloud.sdk.api.RecognizeTemplate;
import aspose.omr.cloud.sdk.models.OMRResponse;
import aspose.omr.cloud.sdk.models.OmrRecognizeTask;

import com.sun.jersey.core.util.Base64;

import org.apache.commons.io.IOUtils;
import org.testng.Assert;
import org.junit.Test;

import java.io.InputStream;
import java.net.URL;
import java.util.*;
import java.util.concurrent.TimeUnit;

public class RecognizeTemplateTest {

    @Test
    public void RecognizeTemplateTest() throws Exception {
        try {

            ApiClient apiClient = new ApiClient();
            RecognizeTemplate api = new RecognizeTemplate(apiClient);

            // get the omr file
            //byte[] omrFile = FileUtils.readFileToByteArray(Paths.get(common.GetResultFolderDir(), "Aspose_test.omr").toAbsolutePath().toFile());
            // set up recognition threshold
            int recognitionThreshold = 30;

            // get the filled template
            //byte[] image = FileUtils.readFileToByteArray(Paths.get(common.GetDataFolderDir(), "Aspose_test.jpg").toAbsolutePath().toFile());
            ClassLoader classLoader = this.getClass().getClassLoader();

            //URL resource = classLoader.getResource("res/Aspose_test.Jpg");
            InputStream in = this.getClass().getClassLoader().getResourceAsStream("Aspose_test.Jpg");
            byte[] bytes = IOUtils.toByteArray(in);

            List<String> images = new ArrayList<>();
            images.add(new String(Base64.encode(bytes)));
            // Set up request
            OmrRecognizeTask task = new OmrRecognizeTask();
            task.setOmrFile(new String("ewoJIlZlcnNpb24iOiAiMS4wIiwKCSJOYW1lIjogIk15VGVtcGxhdGUiLAoJIlBhZ2VzIjogWwoJCXsKCQkJIkhlaWdodCI6IDM1MDgsCgkJCSJXaWR0aCI6IDI0ODAsCgkJCSJFbGVtZW50cyI6IFsKCQkJCXsKCQkJCQkiVHlwZSI6ICJDaG9pY2VCb3giLAoJCQkJCSJOYW1lIjogIlF1ZXN0aW9uMSIsCgkJCQkJIldpZHRoIjogIjIwODAiLAoJCQkJCSJIZWlnaHQiOiAiMTU4IiwKCQkJCQkiVG9wIjogIjU0MSIsCgkJCQkJIkxlZnQiOiAiMzA1IiwKCQkJCQkiQWxpZ25lZEhvcml6b250YWxseSI6IGZhbHNlLAoJCQkJCSJBbGlnbmVkVmVydGljYWxseSI6IGZhbHNlLAoJCQkJCSJCdWJibGVIZWlnaHQiOiA3MCwKCQkJCQkiQnViYmxlV2lkdGgiOiA3MCwKCQkJCQkiQnViYmxlcyI6IFsKCQkJCQkJewoJCQkJCQkJIlZhbHVlIjogIkEiLAoJCQkJCQkJIlRvcCI6ICI1NDEiLAoJCQkJCQkJIkxlZnQiOiAiMzA1IiwKCQkJCQkJCSJJc1ZhbGlkIjogdHJ1ZQoJCQkJCQl9LAoJCQkJCQl7CgkJCQkJCQkiVmFsdWUiOiAiQiIsCgkJCQkJCQkiVG9wIjogIjU0MSIsCgkJCQkJCQkiTGVmdCI6ICIxMzQ1IiwKCQkJCQkJCSJJc1ZhbGlkIjogdHJ1ZQoJCQkJCQl9LAoJCQkJCQl7CgkJCQkJCQkiVmFsdWUiOiAiQyIsCgkJCQkJCQkiVG9wIjogIjY0MSIsCgkJCQkJCQkiTGVmdCI6ICIzMDUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICJEIiwKCQkJCQkJCSJUb3AiOiAiNjQxIiwKCQkJCQkJCSJMZWZ0IjogIjEzNDUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0KCQkJCQldLAoJCQkJCSJNdWx0aXNlbGVjdCI6IGZhbHNlLAoJCQkJCSJPcmllbnRhdGlvbiI6ICJIb3Jpem9udGFsIgoJCQkJfSwKCQkJCXsKCQkJCQkiVHlwZSI6ICJDaG9pY2VCb3giLAoJCQkJCSJOYW1lIjogIlF1ZXN0aW9uMiIsCgkJCQkJIldpZHRoIjogIjIwODAiLAoJCQkJCSJIZWlnaHQiOiAiNzkiLAoJCQkJCSJUb3AiOiAiODE0IiwKCQkJCQkiTGVmdCI6ICIzMDUiLAoJCQkJCSJBbGlnbmVkSG9yaXpvbnRhbGx5IjogZmFsc2UsCgkJCQkJIkFsaWduZWRWZXJ0aWNhbGx5IjogZmFsc2UsCgkJCQkJIkJ1YmJsZUhlaWdodCI6IDcwLAoJCQkJCSJCdWJibGVXaWR0aCI6IDcwLAoJCQkJCSJCdWJibGVzIjogWwoJCQkJCQl7CgkJCQkJCQkiVmFsdWUiOiAiQSIsCgkJCQkJCQkiVG9wIjogIjgxNCIsCgkJCQkJCQkiTGVmdCI6ICIzMDUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICJCIiwKCQkJCQkJCSJUb3AiOiAiODE0IiwKCQkJCQkJCSJMZWZ0IjogIjEzNDUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0KCQkJCQldLAoJCQkJCSJNdWx0aXNlbGVjdCI6IGZhbHNlLAoJCQkJCSJPcmllbnRhdGlvbiI6ICJIb3Jpem9udGFsIgoJCQkJfSwKCQkJCXsKCQkJCQkiVHlwZSI6ICJDaG9pY2VCb3giLAoJCQkJCSJOYW1lIjogIlF1ZXN0aW9uMyIsCgkJCQkJIldpZHRoIjogIjIwODAiLAoJCQkJCSJIZWlnaHQiOiAiNzkiLAoJCQkJCSJUb3AiOiAiOTg3IiwKCQkJCQkiTGVmdCI6ICIzMDUiLAoJCQkJCSJBbGlnbmVkSG9yaXpvbnRhbGx5IjogZmFsc2UsCgkJCQkJIkFsaWduZWRWZXJ0aWNhbGx5IjogZmFsc2UsCgkJCQkJIkJ1YmJsZUhlaWdodCI6IDcwLAoJCQkJCSJCdWJibGVXaWR0aCI6IDcwLAoJCQkJCSJCdWJibGVzIjogWwoJCQkJCQl7CgkJCQkJCQkiVmFsdWUiOiAiQSIsCgkJCQkJCQkiVG9wIjogIjk4NyIsCgkJCQkJCQkiTGVmdCI6ICIzMDUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICJCIiwKCQkJCQkJCSJUb3AiOiAiOTg3IiwKCQkJCQkJCSJMZWZ0IjogIjEzNDUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0KCQkJCQldLAoJCQkJCSJNdWx0aXNlbGVjdCI6IGZhbHNlLAoJCQkJCSJPcmllbnRhdGlvbiI6ICJIb3Jpem9udGFsIgoJCQkJfSwKCQkJCXsKCQkJCQkiVHlwZSI6ICJDaG9pY2VCb3giLAoJCQkJCSJOYW1lIjogIlF1ZXN0aW9uNCIsCgkJCQkJIldpZHRoIjogIjIwODAiLAoJCQkJCSJIZWlnaHQiOiAiNzkiLAoJCQkJCSJUb3AiOiAiMTE2MCIsCgkJCQkJIkxlZnQiOiAiMzA1IiwKCQkJCQkiQWxpZ25lZEhvcml6b250YWxseSI6IGZhbHNlLAoJCQkJCSJBbGlnbmVkVmVydGljYWxseSI6IGZhbHNlLAoJCQkJCSJCdWJibGVIZWlnaHQiOiA3MCwKCQkJCQkiQnViYmxlV2lkdGgiOiA3MCwKCQkJCQkiQnViYmxlcyI6IFsKCQkJCQkJewoJCQkJCQkJIlZhbHVlIjogIkEiLAoJCQkJCQkJIlRvcCI6ICIxMTYwIiwKCQkJCQkJCSJMZWZ0IjogIjMwNSIsCgkJCQkJCQkiSXNWYWxpZCI6IHRydWUKCQkJCQkJfSwKCQkJCQkJewoJCQkJCQkJIlZhbHVlIjogIkIiLAoJCQkJCQkJIlRvcCI6ICIxMTYwIiwKCQkJCQkJCSJMZWZ0IjogIjEzNDUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0KCQkJCQldLAoJCQkJCSJNdWx0aXNlbGVjdCI6IGZhbHNlLAoJCQkJCSJPcmllbnRhdGlvbiI6ICJIb3Jpem9udGFsIgoJCQkJfSwKCQkJCXsKCQkJCQkiVHlwZSI6ICJDaG9pY2VCb3giLAoJCQkJCSJOYW1lIjogIlF1ZXN0aW9uNSIsCgkJCQkJIldpZHRoIjogIjkwMCIsCgkJCQkJIkhlaWdodCI6ICI3OSIsCgkJCQkJIlRvcCI6ICIxMzMzIiwKCQkJCQkiTGVmdCI6ICIzMDUiLAoJCQkJCSJBbGlnbmVkSG9yaXpvbnRhbGx5IjogZmFsc2UsCgkJCQkJIkFsaWduZWRWZXJ0aWNhbGx5IjogZmFsc2UsCgkJCQkJIkJ1YmJsZUhlaWdodCI6IDcwLAoJCQkJCSJCdWJibGVXaWR0aCI6IDcwLAoJCQkJCSJCdWJibGVzIjogWwoJCQkJCQl7CgkJCQkJCQkiVmFsdWUiOiAiQSIsCgkJCQkJCQkiVG9wIjogIjEzMzMiLAoJCQkJCQkJIkxlZnQiOiAiMzA1IiwKCQkJCQkJCSJJc1ZhbGlkIjogdHJ1ZQoJCQkJCQl9LAoJCQkJCQl7CgkJCQkJCQkiVmFsdWUiOiAiQiIsCgkJCQkJCQkiVG9wIjogIjEzMzMiLAoJCQkJCQkJIkxlZnQiOiAiNTMwIiwKCQkJCQkJCSJJc1ZhbGlkIjogdHJ1ZQoJCQkJCQl9LAoJCQkJCQl7CgkJCQkJCQkiVmFsdWUiOiAiQyIsCgkJCQkJCQkiVG9wIjogIjEzMzMiLAoJCQkJCQkJIkxlZnQiOiAiNzU1IiwKCQkJCQkJCSJJc1ZhbGlkIjogdHJ1ZQoJCQkJCQl9LAoJCQkJCQl7CgkJCQkJCQkiVmFsdWUiOiAiRCIsCgkJCQkJCQkiVG9wIjogIjEzMzMiLAoJCQkJCQkJIkxlZnQiOiAiOTgwIiwKCQkJCQkJCSJJc1ZhbGlkIjogdHJ1ZQoJCQkJCQl9CgkJCQkJXSwKCQkJCQkiTXVsdGlzZWxlY3QiOiBmYWxzZSwKCQkJCQkiT3JpZW50YXRpb24iOiAiSG9yaXpvbnRhbCIKCQkJCX0sCgkJCQl7CgkJCQkJIlR5cGUiOiAiQ2hvaWNlQm94IiwKCQkJCQkiTmFtZSI6ICJRdWVzdGlvbjYiLAoJCQkJCSJXaWR0aCI6ICIyMDgwIiwKCQkJCQkiSGVpZ2h0IjogIjc5IiwKCQkJCQkiVG9wIjogIjE1MDYiLAoJCQkJCSJMZWZ0IjogIjMwNSIsCgkJCQkJIkFsaWduZWRIb3Jpem9udGFsbHkiOiBmYWxzZSwKCQkJCQkiQWxpZ25lZFZlcnRpY2FsbHkiOiBmYWxzZSwKCQkJCQkiQnViYmxlSGVpZ2h0IjogNzAsCgkJCQkJIkJ1YmJsZVdpZHRoIjogNzAsCgkJCQkJIkJ1YmJsZXMiOiBbCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICJBIiwKCQkJCQkJCSJUb3AiOiAiMTUwNiIsCgkJCQkJCQkiTGVmdCI6ICIzMDUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICJCIiwKCQkJCQkJCSJUb3AiOiAiMTUwNiIsCgkJCQkJCQkiTGVmdCI6ICIxMzQ1IiwKCQkJCQkJCSJJc1ZhbGlkIjogdHJ1ZQoJCQkJCQl9CgkJCQkJXSwKCQkJCQkiTXVsdGlzZWxlY3QiOiBmYWxzZSwKCQkJCQkiT3JpZW50YXRpb24iOiAiSG9yaXpvbnRhbCIKCQkJCX0sCgkJCQl7CgkJCQkJIlR5cGUiOiAiQ2hvaWNlQm94IiwKCQkJCQkiTmFtZSI6ICJRdWVzdGlvbjciLAoJCQkJCSJXaWR0aCI6ICIyMDgwIiwKCQkJCQkiSGVpZ2h0IjogIjc5IiwKCQkJCQkiVG9wIjogIjE2NzkiLAoJCQkJCSJMZWZ0IjogIjMwNSIsCgkJCQkJIkFsaWduZWRIb3Jpem9udGFsbHkiOiBmYWxzZSwKCQkJCQkiQWxpZ25lZFZlcnRpY2FsbHkiOiBmYWxzZSwKCQkJCQkiQnViYmxlSGVpZ2h0IjogNzAsCgkJCQkJIkJ1YmJsZVdpZHRoIjogNzAsCgkJCQkJIkJ1YmJsZXMiOiBbCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICJZIiwKCQkJCQkJCSJUb3AiOiAiMTY3OSIsCgkJCQkJCQkiTGVmdCI6ICIzMDUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICJOIiwKCQkJCQkJCSJUb3AiOiAiMTY3OSIsCgkJCQkJCQkiTGVmdCI6ICIxMzQ1IiwKCQkJCQkJCSJJc1ZhbGlkIjogdHJ1ZQoJCQkJCQl9CgkJCQkJXSwKCQkJCQkiTXVsdGlzZWxlY3QiOiBmYWxzZSwKCQkJCQkiT3JpZW50YXRpb24iOiAiSG9yaXpvbnRhbCIKCQkJCX0sCgkJCQl7CgkJCQkJIlR5cGUiOiAiQ2hvaWNlQm94IiwKCQkJCQkiTmFtZSI6ICJRdWVzdGlvbjgiLAoJCQkJCSJXaWR0aCI6ICIxMTgwIiwKCQkJCQkiSGVpZ2h0IjogIjc5IiwKCQkJCQkiVG9wIjogIjE5MjUiLAoJCQkJCSJMZWZ0IjogIjMwNSIsCgkJCQkJIkFsaWduZWRIb3Jpem9udGFsbHkiOiBmYWxzZSwKCQkJCQkiQWxpZ25lZFZlcnRpY2FsbHkiOiBmYWxzZSwKCQkJCQkiQnViYmxlSGVpZ2h0IjogNzAsCgkJCQkJIkJ1YmJsZVdpZHRoIjogNzAsCgkJCQkJIkJ1YmJsZXMiOiBbCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICIwIiwKCQkJCQkJCSJUb3AiOiAiMTkyNSIsCgkJCQkJCQkiTGVmdCI6ICIzMDUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICIxIiwKCQkJCQkJCSJUb3AiOiAiMTkyNSIsCgkJCQkJCQkiTGVmdCI6ICI0MjMiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICIyIiwKCQkJCQkJCSJUb3AiOiAiMTkyNSIsCgkJCQkJCQkiTGVmdCI6ICI1NDEiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICIzIiwKCQkJCQkJCSJUb3AiOiAiMTkyNSIsCgkJCQkJCQkiTGVmdCI6ICI2NTkiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICI0IiwKCQkJCQkJCSJUb3AiOiAiMTkyNSIsCgkJCQkJCQkiTGVmdCI6ICI3NzciLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICI1IiwKCQkJCQkJCSJUb3AiOiAiMTkyNSIsCgkJCQkJCQkiTGVmdCI6ICI4OTUiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICI2IiwKCQkJCQkJCSJUb3AiOiAiMTkyNSIsCgkJCQkJCQkiTGVmdCI6ICIxMDEzIiwKCQkJCQkJCSJJc1ZhbGlkIjogdHJ1ZQoJCQkJCQl9LAoJCQkJCQl7CgkJCQkJCQkiVmFsdWUiOiAiNyIsCgkJCQkJCQkiVG9wIjogIjE5MjUiLAoJCQkJCQkJIkxlZnQiOiAiMTEzMSIsCgkJCQkJCQkiSXNWYWxpZCI6IHRydWUKCQkJCQkJfSwKCQkJCQkJewoJCQkJCQkJIlZhbHVlIjogIjgiLAoJCQkJCQkJIlRvcCI6ICIxOTI1IiwKCQkJCQkJCSJMZWZ0IjogIjEyNDkiLAoJCQkJCQkJIklzVmFsaWQiOiB0cnVlCgkJCQkJCX0sCgkJCQkJCXsKCQkJCQkJCSJWYWx1ZSI6ICI5IiwKCQkJCQkJCSJUb3AiOiAiMTkyNSIsCgkJCQkJCQkiTGVmdCI6ICIxMzY3IiwKCQkJCQkJCSJJc1ZhbGlkIjogdHJ1ZQoJCQkJCQl9CgkJCQkJXSwKCQkJCQkiTXVsdGlzZWxlY3QiOiBmYWxzZSwKCQkJCQkiT3JpZW50YXRpb24iOiAiSG9yaXpvbnRhbCIKCQkJCX0sCgkJCQl7CgkJCQkJIlR5cGUiOiAiQ2hvaWNlQm94IiwKCQkJCQkiTmFtZSI6ICJRdWVzdGlvbjkiLAoJCQkJCSJXaWR0aCI6ICI1OTAiLAoJCQkJCSJIZWlnaHQiOiAiNzkiLAoJCQkJCSJUb3AiOiAiMjA5OCIsCgkJCQkJIkxlZnQiOiAiMzA1IiwKCQkJCQkiQWxpZ25lZEhvcml6b250YWxseSI6IGZhbHNlLAoJCQkJCSJBbGlnbmVkVmVydGljYWxseSI6IGZhbHNlLAoJCQkJCSJCdWJibGVIZWlnaHQiOiA3MCwKCQkJCQkiQnViYmxlV2lkdGgiOiA3MCwKCQkJCQkiQnViYmxlcyI6IFsKCQkJCQkJewoJCQkJCQkJIlZhbHVlIjogIjUiLAoJCQkJCQkJIlRvcCI6ICIyMDk4IiwKCQkJCQkJCSJMZWZ0IjogIjMwNSIsCgkJCQkJCQkiSXNWYWxpZCI6IHRydWUKCQkJCQkJfSwKCQkJCQkJewoJCQkJCQkJIlZhbHVlIjogIjQiLAoJCQkJCQkJIlRvcCI6ICIyMDk4IiwKCQkJCQkJCSJMZWZ0IjogIjQyMyIsCgkJCQkJCQkiSXNWYWxpZCI6IHRydWUKCQkJCQkJfSwKCQkJCQkJewoJCQkJCQkJIlZhbHVlIjogIjMiLAoJCQkJCQkJIlRvcCI6ICIyMDk4IiwKCQkJCQkJCSJMZWZ0IjogIjU0MSIsCgkJCQkJCQkiSXNWYWxpZCI6IHRydWUKCQkJCQkJfSwKCQkJCQkJewoJCQkJCQkJIlZhbHVlIjogIjIiLAoJCQkJCQkJIlRvcCI6ICIyMDk4IiwKCQkJCQkJCSJMZWZ0IjogIjY1OSIsCgkJCQkJCQkiSXNWYWxpZCI6IHRydWUKCQkJCQkJfSwKCQkJCQkJewoJCQkJCQkJIlZhbHVlIjogIjEiLAoJCQkJCQkJIlRvcCI6ICIyMDk4IiwKCQkJCQkJCSJMZWZ0IjogIjc3NyIsCgkJCQkJCQkiSXNWYWxpZCI6IHRydWUKCQkJCQkJfQoJCQkJCV0sCgkJCQkJIk11bHRpc2VsZWN0IjogZmFsc2UsCgkJCQkJIk9yaWVudGF0aW9uIjogIkhvcml6b250YWwiCgkJCQl9LAoJCQkJewoJCQkJCSJUeXBlIjogIlJlZmVyZW5jZVBvaW50RWxlbWVudCIsCgkJCQkJIk5hbWUiOiAiUmVmZXJlbmNlUG9pbnQwIiwKCQkJCQkiV2lkdGgiOiAiMTI1IiwKCQkJCQkiSGVpZ2h0IjogIjEyNSIsCgkJCQkJIlRvcCI6ICIyNCIsCgkJCQkJIkxlZnQiOiAiMjQiCgkJCQl9LAoJCQkJewoJCQkJCSJUeXBlIjogIlJlZmVyZW5jZVBvaW50RWxlbWVudCIsCgkJCQkJIk5hbWUiOiAiUmVmZXJlbmNlUG9pbnQxIiwKCQkJCQkiV2lkdGgiOiAiMTI1IiwKCQkJCQkiSGVpZ2h0IjogIjEyNSIsCgkJCQkJIlRvcCI6ICIyNCIsCgkJCQkJIkxlZnQiOiAiMjMzMSIKCQkJCX0sCgkJCQl7CgkJCQkJIlR5cGUiOiAiUmVmZXJlbmNlUG9pbnRFbGVtZW50IiwKCQkJCQkiTmFtZSI6ICJSZWZlcmVuY2VQb2ludDIiLAoJCQkJCSJXaWR0aCI6ICIxMjUiLAoJCQkJCSJIZWlnaHQiOiAiMTI1IiwKCQkJCQkiVG9wIjogIjMzNTkiLAoJCQkJCSJMZWZ0IjogIjI0IgoJCQkJfSwKCQkJCXsKCQkJCQkiVHlwZSI6ICJSZWZlcmVuY2VQb2ludEVsZW1lbnQiLAoJCQkJCSJOYW1lIjogIlJlZmVyZW5jZVBvaW50MyIsCgkJCQkJIldpZHRoIjogIjEyNSIsCgkJCQkJIkhlaWdodCI6ICIxMjUiLAoJCQkJCSJUb3AiOiAiMzM1OSIsCgkJCQkJIkxlZnQiOiAiMjMzMSIKCQkJCX0KCQkJXSwKCQkJIkltYWdlRm9ybWF0IjogIi5wbmciLAoJCQkiSW1hZ2VOYW1lIjogbnVsbAoJCX0KCV0sCgkiVGVtcGxhdGVJZCI6ICIiLAoJIkZpbmFsaXphdGlvbkNvbXBsZXRlIjogZmFsc2UsCgkiSXNHZW5lcmF0ZWQiOiB0cnVlCn0="));
            task.setRecognitionThreshold(recognitionThreshold);
            task.setImages(images);

            String templateId = api.postRecognizeTemplate(task);

            Assert.assertEquals(templateId.isEmpty(),false);

            OMRResponse recognitionResult = new OMRResponse();

            while (true) {
                recognitionResult = api.getRecognizeTemplate(templateId);

                if (recognitionResult.getResponseStatusCode().getValue() == "Ok") {
                    break;
                }

                System.out.println("Wait, please! Your request is still being processed");
                TimeUnit.SECONDS.sleep(5);
            }

            Assert.assertEquals(recognitionResult.getResponseStatusCode().getValue(),"Ok");
            Assert.assertEquals(recognitionResult.getResults().size()>0,true);
            Assert.assertEquals(recognitionResult.getError(),null);

        }catch (Exception e){
            System.out.println(e.getMessage());
        }

    }

}